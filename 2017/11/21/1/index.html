<!DOCTYPE html>












  


<html class="theme-next gemini use-motion" lang="zh-CN">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">












<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">






















<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=6.5.0" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.5.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.5.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.5.0">


  <link rel="mask-icon" href="/images/logo.svg?v=6.5.0" color="#222">









<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '6.5.0',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="[TOC] Boosting算法简介 李泽康 2017.10.21 AI Lab  PAC Probably approximately correct（概率近似正确） Strongly learnable（强可学习） Exist an algorithm that requires error can be driven arbitrarily close to 0.​   Weakly lea">
<meta name="keywords" content="Boosting,机器学习,集成学习">
<meta property="og:type" content="article">
<meta property="og:title" content="boosting详解">
<meta property="og:url" content="https://lizekang.github.io/2017/11/21/1/index.html">
<meta property="og:site_name" content="Zekang Li&#39;s Blog">
<meta property="og:description" content="[TOC] Boosting算法简介 李泽康 2017.10.21 AI Lab  PAC Probably approximately correct（概率近似正确） Strongly learnable（强可学习） Exist an algorithm that requires error can be driven arbitrarily close to 0.​   Weakly lea">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="http://www.msra.cn/wp-content/uploads/2017/06/4caedc7agw1fbfnmnhh0qj20fh071q3e.jpg">
<meta property="og:updated_time" content="2018-11-19T07:43:01.880Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="boosting详解">
<meta name="twitter:description" content="[TOC] Boosting算法简介 李泽康 2017.10.21 AI Lab  PAC Probably approximately correct（概率近似正确） Strongly learnable（强可学习） Exist an algorithm that requires error can be driven arbitrarily close to 0.​   Weakly lea">
<meta name="twitter:image" content="http://www.msra.cn/wp-content/uploads/2017/06/4caedc7agw1fbfnmnhh0qj20fh071q3e.jpg">



  <link rel="alternate" href="/atom.xml" title="Zekang Li's Blog" type="application/atom+xml">




  <link rel="canonical" href="https://lizekang.github.io/2017/11/21/1/">



<script type="text/javascript" id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>boosting详解 | Zekang Li's Blog</title>
  











  <noscript>
  <style type="text/css">
    .use-motion .motion-element,
    .use-motion .brand,
    .use-motion .menu-item,
    .sidebar-inner,
    .use-motion .post-block,
    .use-motion .pagination,
    .use-motion .comments,
    .use-motion .post-header,
    .use-motion .post-body,
    .use-motion .collection-title { opacity: initial; }

    .use-motion .logo,
    .use-motion .site-title,
    .use-motion .site-subtitle {
      opacity: initial;
      top: initial;
    }

    .use-motion {
      .logo-line-before i { left: initial; }
      .logo-line-after i { right: initial; }
    }
  </style>
</noscript>

</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Zekang Li's Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">
    <a href="/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-about">
    <a href="/about/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-user"></i> <br>关于</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">
    <a href="/tags/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>标签</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">
    <a href="/categories/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-th"></i> <br>分类</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">
    <a href="/archives/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>归档</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-sitemap">
    <a href="/sitemap.xml" rel="section">
      <i class="menu-item-icon fa fa-fw fa-sitemap"></i> <br>站点地图</a>
  </li>

      
      
    </ul>
  

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://lizekang.github.io/2017/11/21/1/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zekang Li">
      <meta itemprop="description" content="Stay hungry, stay foolish.">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zekang Li's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">boosting详解
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2017-11-21 15:30:00" itemprop="dateCreated datePublished" datetime="2017-11-21T15:30:00+08:00">2017-11-21</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2018-11-19 15:43:01" itemprop="dateModified" datetime="2018-11-19T15:43:01+08:00">2018-11-19</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/ML/" itemprop="url" rel="index"><span itemprop="name">ML</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>[TOC]</p>
<h1 id="Boosting算法简介"><a href="#Boosting算法简介" class="headerlink" title="Boosting算法简介"></a>Boosting算法简介</h1><blockquote>
<p>李泽康 2017.10.21 AI Lab</p>
</blockquote>
<h2 id="PAC"><a href="#PAC" class="headerlink" title="PAC"></a>PAC</h2><ul>
<li>Probably approximately correct（概率近似正确）</li>
<li>Strongly learnable（强可学习）<ul>
<li>Exist an algorithm that requires error can be driven arbitrarily close to 0.​</li>
</ul>
</li>
<li>Weakly learnable（弱可学习）<ul>
<li>Exist an algorithm that only requires the hypothesis that does better than random guessing.</li>
</ul>
</li>
<li>一个概念是强可学习的充分必要条件是这个概念是弱可学习的。<h2 id="Adaboost"><a href="#Adaboost" class="headerlink" title="Adaboost"></a>Adaboost</h2></li>
<li><p>Adaboost从训练数据中学习一系列弱分类器，并将这些弱分类器线性组合成一个强分类器。</p>
</li>
<li><p>它是一个加法模型:<br>$$ f(x)=\sum <em>{m=1}^{M}\alpha</em>{m} G_{m}(x)$$<br>$\alpha <em>{m}$ ：分类器的系数， $G</em>{m}(x)$ :不同的弱分类器 </p>
</li>
<li><p>损失函数为指数函数：</p>
<p>$$ (\alpha <em>{m}, G</em>{m}(x)) = \arg \min_{\alpha, G} \sum_{i=1}^{N}\overline w_{mi}exp[-y_{i}\alpha G(x_{i})]$$  </p>
<p>其中 $$ \overline w_{mi} = exp[-y_{i}f_{m-1}(x_{i})]$$   </p>
</li>
<li><p>Adaboost 算法原理(以二分类为例)</p>
<p>输入： $$ (x_{i}, y_{i}), y={-1, +1}$$</p>
<ol>
<li><p>初始化训练数据的权值分布：$$ D_{1} = (w_{11}, …,w_{1i},…,w_{1N})$$ , $$w_{1i} = \frac{1}{N}, i=1,2,…,N$$</p>
</li>
<li><p>对$$m=1, 2, …, M$$ :</p>
<ol>
<li><p>使用权值分布为$$D_{m}$$ 训练得到弱分类器：$G_{m}(x)$</p>
</li>
<li><p>计算误差率：$$e_{m} = \sum <em>{i=1}^{N}w</em>{mi}I(G_{m}(x_{i}) \neq y_{i})$$ </p>
</li>
<li><p>计算分类器系数$\alpha _{m}$ : $$\alpha <em>{m} = \frac{1}{2}log\frac{1-e</em>{m}}{e_m}$$ </p>
</li>
<li><p>更新权值分布： </p>
<p>$$D_{m+1} = (w_{m+1,1},…,w_{m+1,i}, … , w_{m+1,N})$$ </p>
<p>$$w_{m+1, i} = \frac{w_{mi}}{Z_{m}}exp(-\alpha_{m}y_{i}G_{m}(x_{i}))$$ </p>
<p>$$Z_{m} = \sum_{i=1}^{N}w_{mi}exp(-\alpha_{m}y_{i}G_{m}(x_{i}))$$  </p>
<p>其中，规范化因子$Z_{m}$ 使$D_{m+1}$ 成为一个概率分布</p>
</li>
</ol>
</li>
<li><p>构建分类器的线性组合:$$ f(x)=\sum <em>{m=1}^{M}\alpha</em>{m} G_{m}(x)$$ 得到最终分类器$$G_{m}(x) = sign(f(x))$$ </p>
</li>
</ol>
</li>
<li><p>一些分析</p>
<ol>
<li><p>Adaboost的正则化（防止过拟合）：定义learning_rate $l$ ,前面有：$f_{m}(x) = f_{m-1}(x) + \alpha_mG_{m}(x)$ </p>
<p>加上正则化项有：$f_{m}(x) = f_{m-1}(x) + l\alpha_mG_{m}(x)$ </p>
</li>
<li><p>$\alpha_{m}$随$e_{m}$ 减小而增大，分类错误率越小的基本分类器在最终分类器中的作用越大</p>
</li>
<li><p>adaboost不改变数据，只是改变数据的权值</p>
</li>
<li><p>Adaboost的训练误差界：</p>
<p>$$\frac{1}{N}\sum_{i=1}^{N}I(G_(x_{i}) \neq y_{i}) \leq \frac{1}{N}\sum_{i}exp(-y_{i}f(x_{i})) = \prod_{m}Z_{m} \leq exp(-2\sum_{m=1}^{M}\gamma_{m}^{2}), \gamma_{m} = \frac{1}{2} - e_{m}$$ </p>
<p>So, adaboost训练误差以指数速率下降！</p>
</li>
<li><p>Adaboost使用比较广泛的弱学习器是决策树和神经网络。</p>
</li>
<li><p>优势：分类精度比较高，比较灵活可以使用各种回归、分类模型作为弱学习器，不容易发生过拟合</p>
<p>缺点：对异常数据比较敏感，可能对异常数据赋较大权值。</p>
</li>
</ol>
</li>
</ul>
<h2 id="GDBT"><a href="#GDBT" class="headerlink" title="GDBT"></a>GDBT</h2><ul>
<li><p>Gradient Decent <strong>Boosting Tree</strong> </p>
</li>
<li><p>Gradient Boosting 就是在函数空间的梯度下降</p>
</li>
<li><p>是一个加法模型：</p>
<p>$$F(x;w)=\sum_{m=0}^{M}a_{m}h_{m}(x;w_{m})=\sum_{m=0}^{M}f_{m}(x;w_{m})$$  </p>
<p>$x$ ：输入样本，$h_{m}$  :分类回归树，w：回归树的参数，$\alpha_{m}$  :每棵树权重</p>
</li>
<li><p>GDBT算法原理</p>
<p>输入：$$(x_{i}, y_{i}), M, L$$ </p>
<ol>
<li>初始化$f_{0}$  </li>
<li>对$m = 1,2,…,M$ :<ol>
<li>响应：$$\widetilde {y}<em>{i} = -[\frac{\partial L(y</em>{i}, F(x_{i}))}{\partial F(x_{i})}]<em>{F(x)=F</em>{m-1}(x)}, i=1,…,N$$   </li>
<li>学习第m棵树：$$w_{m} = \arg \min_{w}\sum_{i=1}^{N}(\widetilde y_{i}-h_{m}(x_{i}; w_{m-1}))^{2}$$  </li>
<li>line search 寻找步长：$$\rho_{m} = \arg \min_{\rho} \sum_{i=1}^{N}L(y_{i}, F_{m-1}(x_{i}) + \rho h(x_{i};w_{m}))  $$  </li>
<li>令$f_{m} = \rho_{m}h_{m}$ 则$F_{m} = F_{m-1} + f_{m}$  </li>
</ol>
</li>
</ol>
</li>
<li><p>一些分析</p>
<ol>
<li>GDBT就是使用决策树作为基分类器的boosting方法。与Adaboost不同的是GDBT是一个不断拟合残差并直接叠加到F上的过程，残差不断减小，Loss不断减小。</li>
<li>在GDBT里，F是泛函空间，f是函数，组合时直接叠加。而Adaboost中f是有权重的，在GDBT中权重信息被吸收到决策树的叶子节点里了。</li>
<li>初始化的时候<ul>
<li>随机</li>
<li>用训练样本的充分统计量初始化</li>
<li>用其他模型的预测值初始化，例：<a href="http://proceedings.mlr.press/v14/mohan11a/mohan11a.pdf" target="_blank" rel="noopener">GDBT在搜索引擎排序中的应用</a> 它使用了RF的输出作为GDBT的初始化，取得了不错的效果。</li>
</ul>
</li>
<li>使用GDBT生成新特征，<a href="http://quinonero.net/Publications/predicting-clicks-facebook.pdf" target="_blank" rel="noopener">Practical Lessons from Predicting Clicks on Ads at Facebook, 2014. </a> </li>
</ol>
</li>
</ul>
<h2 id="XGBoost"><a href="#XGBoost" class="headerlink" title="XGBoost"></a>XGBoost</h2><ul>
<li><p>GDBT是函数空间的梯度下降，XGBoost是函数空间的牛顿法</p>
</li>
<li><p>相比于GDBT，XGBoost多了正则化项，目标函数变为：$$\sum_{L}L(\hat y_{i}; y_{i}) + \sum_{k}\Omega(f_{k})$$ </p>
<p>XGBoost采用的正则化项：$$\Omega(f) = \gamma T + \frac{1}{2}\lambda||w||^{2}$$ , 其中，T：叶子节点数，w：叶节点分数</p>
</li>
<li><p>误差函数的二阶泰勒展开：</p>
<ol>
<li><p>在第t次迭代后：$$\hat y_{i}^{(t)} = \hat y_{i}^{(t-1)} + f_{t}(x_{i})$$ </p>
</li>
<li><p>此时损失函数可以写为：$$L(\hat y_{i}^{(t-1)} + f_{t}(x_{i}), y_{i})$$ ，需要学习的只有$f_{t}$ </p>
</li>
<li><p>在$$\hat y_{i}^{(t-1)}$$ 处将损失函数进行二阶泰勒展开：$$L(\hat y_{i}^{(t-1)}, y_{i}) + g_{i}f_{t}(x_{i}) + \frac{1}{2}h_{i}f_{t}^{2}(x_{i})$$ </p>
<p>其中，$$g_{i} = \partial_{\hat y^{(t-1)}}L(\hat y^{(t-1)},y_{i}) $$  , $$h_{i} = \partial^{2}<em>{\hat y^{(t-1)}}L(\hat y^{(t-1)}, y</em>{i})$$ </p>
</li>
<li><p>显然，$$L(\hat y_{i}^{(t-1)}, y_{i})$$ 为常数，可以消掉，目标函数：$$\widetilde {\mathcal {L}}^{(t)} = \sum_{i=1}^{N}[ g_{i}f_{t}(x_{i}) + \frac{1}{2}h_{i}f_{t}^{2}(x_{i})] + \Omega(f_{t})$$   </p>
</li>
<li><p>$$\widetilde {\mathcal {L}}^{(t)} = \sum_{i=1}^{N}[ g_{i}f_{t}(x_{i}) + \frac{1}{2}h_{i}f_{t}^{2}(x_{i})] + \gamma T + \frac{1}{2}||w||^{2} = \sum_{i=1}^{N}[g_{i}w_{q_(x_{i})} + \frac{1}{2}h_{i}w_{q(x_{i})}] + \gamma T + \frac{1}{2}\lambda \sum <em>{j=1}^{T} w</em>{j}^{2}$$  </p>
</li>
<li><p>这个式子感觉挺复杂，现在我们要把他们统一起来，$w_{q(x_{i})}$ 表示回归树对每个样本的预测值，$w_{j}$ 表示每个叶子节点的分数，$q(x_{i})$ 表示将样本分到某个叶子节点上。我们可以设集合$I_{j} = {i|q(x_{i}) = j}$ ，此时：</p>
<p>$$\widetilde {\mathcal {L}}^{(t)} = \sum_{j=1}^{T}[\sum_{i\in I_{j}}g_{i}w_{j} + \frac{1}{2} (\sum_{i\in I_{j}}h_{i} + \lambda)w_{j}^{2}] + \gamma T = \sum <em>{j=1}^{T}[G</em>{j}w_{j} + \frac{1}{2} (H_{j} + \lambda )w_{j}^{2}] + \gamma T$$   </p>
</li>
<li><p>如何来使损失函数最小化：假定树的结构确定了，那么我们需要调整的只是$w_{j}$ ，当$$\widetilde {\mathcal {L}}^{(t)}$$ 对$w_{j}$ 导数为0时，取到极小，此时可以得到最优预测分数和最小损失：</p>
<p>$$w_{j}^{<em>} = - \frac{G_{j}}{H_{j} + \lambda}$$ , $$\widetilde {\mathcal {L}}^{</em>} = -\frac{1}{2}\sum_{j=1}^{T}\frac{G_{j}^{2}}{H_{j} + \lambda } + \gamma T$$ </p>
</li>
<li><p>So， 怎么去确定树的结构呢？</p>
<ol>
<li>暴力解所有树结构（np难啊）</li>
<li>贪心，每次分裂一个节点，计算增益：$$Gain = \frac{G_{L}^{2}}{H_{L} + \lambda} + \frac{G_{R}^{2}}{H_{R} + \lambda} - \frac{(G_{L} + G_{R})^{2}}{(H_{L} + H_{R}) + \lambda} -\gamma$$ <ul>
<li>exact greedy</li>
<li>Weighted Quantile Sketch</li>
</ul>
</li>
</ol>
</li>
</ol>
</li>
<li><p>并行</p>
</li>
<li><p>优势：</p>
<ol>
<li>加入了正则化</li>
<li>使用了二阶导信息</li>
<li>列抽样来防止过拟合</li>
<li>Weighted Quantile Sketch</li>
<li>样本数据预先排序，存储为block，利于并行</li>
<li>可以对缺失值自动处理</li>
</ol>
</li>
<li><p>调参</p>
<blockquote>
<p><a href="https://www.analyticsvidhya.com/blog/2016/03/complete-guide-parameter-tuning-xgboost-with-codes-python/" target="_blank" rel="noopener">https://www.analyticsvidhya.com/blog/2016/03/complete-guide-parameter-tuning-xgboost-with-codes-python/</a></p>
</blockquote>
</li>
</ul>
<h2 id="LightGBM"><a href="#LightGBM" class="headerlink" title="LightGBM"></a>LightGBM</h2><blockquote>
<p>一个基于决策树算法的分布式梯度提升框架，<a href="https://github.com/Microsoft/LightGBM" target="_blank" rel="noopener">https://github.com/Microsoft/LightGBM</a></p>
</blockquote>
<ul>
<li><p>与xgboost的速度比较</p>
<p>| <strong>Data</strong>  | <strong>xgboost</strong> | <strong>xgboost_hist</strong> | <strong>LightGBM</strong>     |<br>| ——— | ———– | —————- | —————- |<br>| Higgs     | 3794.34 s   | 551.898 s        | <strong>238.505513 s</strong> |<br>| Yahoo LTR | 674.322 s   | 265.302 s        | <strong>150.18644 s</strong>  |<br>| MS LTR    | 1251.27 s   | 385.201 s        | <strong>215.320316 s</strong> |<br>| Expo      | 1607.35 s   | 588.253 s        | <strong>138.504179 s</strong> |<br>| Allstate  | 2867.22 s   | 1355.71 s        | <strong>348.084475 s</strong> |</p>
</li>
<li><p>内存占用比较：</p>
<p>| <strong>Data</strong>  | <strong>xgboost</strong> | <strong>xgboost_hist</strong> | <strong>LightGBM</strong> |<br>| ——— | ———– | —————- | ———— |<br>| Higgs     | 4.853GB     | 3.784GB          | <strong>0.868GB</strong>  |<br>| Yahoo LTR | 1.907GB     | 1.468GB          | <strong>0.831GB</strong>  |<br>| MS LTR    | 5.469GB     | 3.654GB          | <strong>0.886GB</strong>  |<br>| Expo      | 1.553GB     | 1.393GB          | <strong>0.543GB</strong>  |<br>| Allstate  | 6.237GB     | 4.990GB          | <strong>1.027GB</strong>  |</p>
</li>
<li><p>准确率比较：</p>
<p>| <strong>Data</strong>  | <strong>Metric</strong> | <strong>xgboost</strong> | <strong>xgboost_hist</strong> | <strong>LightGBM</strong> |<br>| :——-: | ———- | ———– | —————- | ———— |<br>|   Higgs   | AUC        | 0.839593    | 0.845605         | 0.845154     |<br>| Yahoo LTR | NDCG1      | 0.719748    | 0.720223         | 0.732466     |<br>|  MS LTR   | NDCG1      | 0.483956    | 0.488649         | 0.524255     |<br>|   Expo    | AUC        | 0.756713    | 0.777777         | 0.777543     |</p>
</li>
<li><p>两者区别：</p>
<ol>
<li><p>切分算法：</p>
<ol>
<li><p>xgboost基于预排序（pre-sorted），对所有特征进行预排序，在寻找分割点时代价为O(#data)。很精确，但空间，时间，cache优化不友好。</p>
</li>
<li><p>LightGBM使用了Histogram算法,它主要是把连续的浮点值离散化为k个整数，构造一个宽度为#bins（k）的直方图。根据这些离散值寻找最优分割。内存消耗大大降低，这样不需要存储预排序的结果，而且可以只保存特征离散后的值，这个值一般用8位整型存就够了，而在预排序算法中，需要使用32位分别储存index和feature value。内存消耗降低到1/8。时间复杂度从O(#data <em> #feature)变为O(#bins </em> #feature)。很好的利用了弱模型集成的思想。</p>
<p><img src="http://www.msra.cn/wp-content/uploads/2017/06/4caedc7agw1fbfnmnhh0qj20fh071q3e.jpg" alt="直方图算法"> </p>
<p>​</p>
</li>
</ol>
</li>
<li><p>决策树生长策略：</p>
<ol>
<li>xgboost使用level-wise（容易多线程优化，控制模型复杂度，不容易过拟合，但比较低效）</li>
<li>LightGBM使用带深度限制的leaf-wise</li>
</ol>
</li>
<li><p>LightGBM 的直方图差加速优化，提升一倍速度。</p>
</li>
<li><p>高效并行</p>
<ol>
<li><p>原始</p>
<p><strong>特征并行</strong>    的主要思想是在不同机器在不同的特征集合上分别寻找最优的分割点，然后在机器间同步最优的分割点。</p>
<p><strong>数据并行</strong>则是让不同的机器先在本地构造直方图，然后进行全局的合并，最后在合并的直方图上面寻找最优分割点。</p>
</li>
<li><p>LightGBM针对这两种并行方法都做了优化</p>
<p>在<strong>特征并行</strong>算法中，通过在<strong>本地保存全部数据</strong>避免对数据切分结果的<strong>通信</strong>；</p>
<p>在<strong>数据并行</strong>中使用<strong>分散规约(Reduce scatter)</strong>把直方图合并的任务分摊到不同的机器，降低通信和计算，并利用<strong>直方图做差</strong>，进一步减少了一半的通信量。<strong>基于投票的数据并行(Parallel Voting)</strong>则进一步优化数据并行中的通信代价，使通信代价变成常数级别。</p>
</li>
</ol>
</li>
<li><p>LightGBM是第一个直接支持类别特征的GBDT工具</p>
</li>
</ol>
</li>
</ul>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://statweb.stanford.edu/~jhf/ftp/trebst.pdf" target="_blank" rel="noopener">Greedy function approximation a gradient boosting machine. J.H.Friedman(1999)</a>  </li>
<li><a href="https://arxiv.org/pdf/1603.02754.pdf" target="_blank" rel="noopener">XGBoost: A Scalable Tree Boosting System. T. Chen, C. Guestrin (2016)</a> </li>
<li><a href="https://www.google.com/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=1&amp;cad=rja&amp;uact=8&amp;ved=0ahUKEwiQjuDHmP_WAhUI5yYKHa96CRIQFggmMAA&amp;url=http%3A%2F%2Fwww.jennwv.com%2Fcourses%2FF11%2Flecture13.pdf&amp;usg=AOvVaw1ZToE-UxP82QKandDEP0Di" target="_blank" rel="noopener">CS260 : Lecture 13: Weak vs. Strong Learning and the Adaboost Algorithm</a> </li>
<li>《统计学习方法》李航著</li>
<li><a href="https://github.com/Microsoft/LightGBM" target="_blank" rel="noopener">LightGBM(github)</a>   </li>
<li><a href="http://www.msra.cn/zh-cn/news/features/lightgbm-20170105" target="_blank" rel="noopener">http://www.msra.cn/zh-cn/news/features/lightgbm-20170105</a></li>
</ul>

      
    </div>

    

    
    
    

    

    
      <div>
          
<div class="my_post_copyright">
  <script src="//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js"></script>
  <!-- JS库 sweetalert 可修改路径 -->
  <script type="text/javascript" src="http://jslibs.wuxubj.cn/sweetalert_mini/jquery-1.7.1.min.js"></script>
  <script src="http://jslibs.wuxubj.cn/sweetalert_mini/sweetalert.min.js"></script>
  <link rel="stylesheet" type="text/css" href="http://jslibs.wuxubj.cn/sweetalert_mini/sweetalert.mini.css">
  <p><span>本文标题:</span><a href="/2017/11/21/1/">boosting详解</a></p>
  <p><span>文章作者:</span><a href="/" title="访问 Zekang Li 的个人博客">Zekang Li</a></p>
  <p><span>发布时间:</span>2017年11月21日 - 15:11</p>
  <p><span>最后更新:</span>2018年11月19日 - 15:11</p>
  <p><span>原始链接:</span><a href="/2017/11/21/1/" title="boosting详解">https://lizekang.github.io/2017/11/21/1/</a>
    <span class="copy-path" title="点击复制文章链接"><i class="fa fa-clipboard" data-clipboard-text="https://lizekang.github.io/2017/11/21/1/" aria-label="复制成功！"></i></span>
  </p>
  <p><span>许可协议:</span><i class="fa fa-creative-commons"></i> <a rel="license" href="https://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank" title="Attribution-NonCommercial-NoDerivatives 4.0 International (CC BY-NC-ND 4.0)">署名-非商业性使用-禁止演绎 4.0 国际</a> 转载请保留原文链接及作者。</p>  
</div>
<script> 
    var clipboard = new Clipboard('.fa-clipboard');
    clipboard.on('success', $(function(){
      $(".fa-clipboard").click(function(){
        swal({   
          title: "",   
          text: '复制成功',   
          html: false,
          timer: 500,   
          showConfirmButton: false
        });
      });
    }));  
</script>


      </div>
    

    
      <div>
        <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
  <div>很高兴我的文章对你有帮助，请我喝杯咖啡吧！</div>
  <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
    <span>打赏</span>
  </button>
  <div id="QR" style="display: none;">

    
      <div id="wechat" style="display: inline-block">
        <img id="wechat_qr" src="/images/wechatpay.jpg" alt="Zekang Li 微信支付">
        <p>微信支付</p>
      </div>
    

    

    

  </div>
</div>

      </div>
    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Boosting/" rel="tag"># Boosting</a>
          
            <a href="/tags/机器学习/" rel="tag"># 机器学习</a>
          
            <a href="/tags/集成学习/" rel="tag"># 集成学习</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2017/10/01/hello-world/" rel="next" title="Hello World">
                <i class="fa fa-chevron-left"></i> Hello World
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/11/19/1/" rel="prev" title="《Tag Disentangled Generative Adversarial Networks for Object Image Re-rendering》阅读笔记">
                《Tag Disentangled Generative Adversarial Networks for Object Image Re-rendering》阅读笔记 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>


  </div>


          </div>
          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/avatar.gif" alt="Zekang Li">
            
              <p class="site-author-name" itemprop="name">Zekang Li</p>
              <p class="site-description motion-element" itemprop="description">Stay hungry, stay foolish.</p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">4</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  <a href="/categories/index.html">
                    
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">2</span>
                    <span class="site-state-item-name">分类</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  <a href="/tags/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">7</span>
                    <span class="site-state-item-name">标签</span>
                  </a>
                </div>
              
            </nav>
          

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  <a href="https://github.com/lizekang" target="_blank" title="GitHub"><i class="fa fa-fw fa-globe"></i>GitHub</a>
                  
                </span>
              
                <span class="links-of-author-item">
                  <a href="mailto:zekangli97@gmail.com" target="_blank" title="E-Mail"><i class="fa fa-fw fa-globe"></i>E-Mail</a>
                  
                </span>
              
            </div>
          

          
          

          
          

          
            
          
          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Boosting算法简介"><span class="nav-number">1.</span> <span class="nav-text">Boosting算法简介</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#PAC"><span class="nav-number">1.1.</span> <span class="nav-text">PAC</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Adaboost"><span class="nav-number">1.2.</span> <span class="nav-text">Adaboost</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#GDBT"><span class="nav-number">1.3.</span> <span class="nav-text">GDBT</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#XGBoost"><span class="nav-number">1.4.</span> <span class="nav-text">XGBoost</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#LightGBM"><span class="nav-number">1.5.</span> <span class="nav-text">LightGBM</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Reference"><span class="nav-number">1.6.</span> <span class="nav-text">Reference</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright"> &copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Zekang Li</span>

  

  
</div>




  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动 v3.8.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 – <a class="theme-link" target="_blank" href="https://theme-next.org">NexT.Gemini</a> v6.5.0</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    
	
    

    
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=6.5.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=6.5.0"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=6.5.0"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=6.5.0"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=6.5.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=6.5.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=6.5.0"></script>



  



  










  





  

  

  

  

  
  

  
  

  
    
      <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      },
      TeX: {equationNumbers: { autoNumber: "AMS" }}
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
      var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>
<script type="text/javascript" src="//cdn.jsdelivr.net/npm/mathjax@2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

    
  


  
  

  

  

  

  

  

</body>
</html>
